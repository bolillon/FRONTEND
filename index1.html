<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Control de Foco</title>
  </head>
  <body>
    <h1>Control de Foco</h1>
    <button onclick="turnOn()">Encender</button>
    <button onclick="turnOff()">Apagar</button>
    <div id="status"></div>
    <script>
      async function turnOn() {
        await fetch("https://exercise1-2-0um5.onrender.com/turn-on", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ user: "ariel", enrollId: "123456" }),
        });
        updateStatus();
      }
      async function turnOff() {
        await fetch("https://exercise1-2-0um5.onrender.com/turn-off", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ user: "ariel", enrollId: "123456" }),
        });
        updateStatus();
      }
      async function updateStatus() {
        const res = await fetch("https://exercise1-2-0um5.onrender.com/status");
        const data = await res.json();
        document.getElementById("status").innerText = `Estado: ${
          data.status.isOn ? "ENCENDIDO" : "APAGADO"
        }`;
      }
      updateStatus(); // Carga el estado inicial al abrir la p√°gina
    </script>
  </body>
</html>
